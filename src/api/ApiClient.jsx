import axios from "axios";

const apiUrl = import.meta.env.VITE_API_BASE;
const apiPath = import.meta.env.VITE_API_PATH;

export { apiUrl, apiPath };

// 取得所有產品
export const getAllProducts = () => {
  return axios.get(`${apiUrl}/api/${apiPath}/products/all`);
};

// 取得包含產品分類、頁面的所有產品
export const getProducts = (page = 1, category = "") => {
  return axios.get(`${apiUrl}/api/${apiPath}/products`, {
    params: {
      page,
      category,
    },
  });
};

// 取得單一產品詳情
export const getProductDetail = (id) => {
  return axios.get(`${apiUrl}/api/${apiPath}/product/${id}`);
};

// 加入購物車
export const addCart = (id = "", qty = 1) => {
  const data = {
    data: {
      product_id: id,
      qty,
    },
  };
  return axios.post(`${apiUrl}/api/${apiPath}/cart`, data);
};

// 取得購物車內容
export const getCart = () => {
  return axios.get(`${apiUrl}/api/${apiPath}/cart`);
};

// 修改購物車內容
export const editCart = (cartId, productId, qty) => {
  const data = {
    data: {
      product_id: productId,
      qty: qty,
    },
  };
  return axios.put(`${apiUrl}/api/${apiPath}/cart/${cartId}`, data);
};

// 刪除購物車內容
export const deleteCart = (cartId) => {
  return axios.delete(`${apiUrl}/api/${apiPath}/cart/${cartId}`);
};

// 刪除全部購物車
export const deleteAllCart = () => {
  return axios.delete(`${apiUrl}/api/${apiPath}/carts`);
};
